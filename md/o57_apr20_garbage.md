โจทย์ต้องการให้หาว่า หากต้องการเดินทางบน undirected, weighted graph จาก node $P_j$ ไปยัง $Q_j$ จะทำให้เส้นที่เดินผ่านที่มีน้ำหนักมากที่สุด มีน้ำหนักน้อยที่สุดได้เท่าไร

หากเราพิจารณาแต่ละคำถามแยกกัน เราสามารถหาคำตอบได้โดยเรียงน้ำหนักเส้นเชื่อมจากน้อยไปมาก ค่อย ๆ เติมเส้นเชื่อมเข้าไปในกราฟทีละเส้นจนกว่า $P_j$ กับ $Q_j$ จะเชื่อมกันแล้วตอบน้ำหนักเส้นเชื่อม ณ เวลานั้น (เติมเส้นเชื่อมและตรวจสอบการเชื่อมกันได้โดยใช้ Union-find Disjoint Set)

หากต้องทำกระบวนการเช่นนี้ซ้ำทุกครั้งที่พิจารณาคำถามใหม่จะเสียเวลา ดังนั้นเราต้องหาวิธีทำกระบวนการนี้เพียงครั้งเดียวแล้วตอบทุกคำถามให้ได้

สามารถแก้ปัญหานี้ได้โดยใช้ Union-find Disjoint Set แบบใช้ Union by Rank แต่**ไม่ใช้ Path Compression** โดยทุกครั้งที่รวม component $v$ เข้าไปใน component $u$ นอกจากจะกำหนดให้ parent ของ $v$ เท่ากับ $u$ แล้ว ให้ใส่หมายเลขกำกับไปอีกด้วยว่าเป็นการเชื่อมด้วยเส้นเชื่อมน้ำหนักเท่าใด สุดท้ายจะได้โครงสร้างของ Union-find Disjoint Set มีลักษณะเป็น weighted, rooted tree

เมื่อทำเช่นนี้แล้ว การตอบคำถามที่ $j$ สามารถทำได้โดยหา edge ที่มากที่สุดบน path จาก $P_j$ ไป $Q_j$ บนต้นไม้ที่เกิดจาก Union-find Disjoint Set ซึ่งสามารถหาได้ในเวลา $O(\log N)$ ด้วยเทคนิค [Binary Lifting](https://www.geeksforgeeks.org/lca-in-a-tree-using-binary-lifting-technique/)

เนื่องจาก Union by Rank ใช้เวลารวมหรือตรวจสอบครั้งละ $O(\log N)$ amortized และเราต้องตอบคำถาม $Q$ ครั้ง แต่ละครั้งใช้เวลา $O(\log N)$ ในการตอบ จะได้ Time Complexity ทั้งหมดเป็น $O((M+Q) \log N)$
